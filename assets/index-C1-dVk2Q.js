import{r as f,a as Ue,R as Ge}from"./vendor-wGySg1uH.js";import{u as $,w as Ve}from"./xlsx-DrgRuPKf.js";import{L as He,a as Je,C as Ze,S as Qe,P as Ne,T as Oe,U as De,b as Ie,H as Ye,c as ne,F as Xe,d as Ae,A as me,D as es,e as ss,f as ie,g as ts,h as as,i as be,j as ls,k as Te,R as Le,B as ve,l as rs,m as de,n as ns,o as oe,X as Me,p as pe,q as Be,r as ze,G as is,s as xe,t as cs,u as ds,v as ye,w as os,x as Se,y as Pe,z as ms,E as xs,I as ke,J as hs,M as us}from"./icons-Huucgetx.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();var Ke={exports:{}},fe={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bs=f,ps=Symbol.for("react.element"),fs=Symbol.for("react.fragment"),js=Object.prototype.hasOwnProperty,gs=bs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ns={key:!0,ref:!0,__self:!0,__source:!0};function _e(t,l,i){var r,n={},o=null,c=null;i!==void 0&&(o=""+i),l.key!==void 0&&(o=""+l.key),l.ref!==void 0&&(c=l.ref);for(r in l)js.call(l,r)&&!Ns.hasOwnProperty(r)&&(n[r]=l[r]);if(t&&t.defaultProps)for(r in l=t.defaultProps,l)n[r]===void 0&&(n[r]=l[r]);return{$$typeof:ps,type:t,key:o,ref:c,props:n,_owner:gs.current}}fe.Fragment=fs;fe.jsx=_e;fe.jsxs=_e;Ke.exports=fe;var e=Ke.exports,we={},Ee=Ue;we.createRoot=Ee.createRoot,we.hydrateRoot=Ee.hydrateRoot;var T=(t=>(t.BOPP="BOPP",t.BOPP_MATE="BOPP MATE",t.BOPP_METALIZADO="BOPP METALIZADO",t.BOPP_DT="BOPP DT",t.BOPP_PERLADO="BOPP PERLADO",t.BOPP_BLANCO="BOPP BLANCO",t.PET="PET",t.PET_DT="PET DT",t.PET_PVDC="PET PVDC",t.PET_METALIZADO="PET METALIZADO",t.PE="PE",t.PE_BCO="PE BCO",t.CPP="CPP",t.BOPA="BOPA",t.PAPER="PAPEL",t.FOIL="ALUMINIO",t))(T||{});const Fe={BOPP:.91,"BOPP MATE":.91,"BOPP METALIZADO":.91,"BOPP DT":.91,"BOPP PERLADO":.7,"BOPP BLANCO":.95,PET:1.4,"PET DT":1.4,"PET PVDC":1.45,"PET METALIZADO":1.4,PE:.92,"PE BCO":1,CPP:.9,BOPA:1.15,PAPEL:1,ALUMINIO:2.7};var J=(t=>(t.UNITS="Unidades",t.KILOS="Kilos",t.METERS="Metros",t))(J||{});const vs=[{id:"c1",name:"Alimentos del Valle",contact:"Juan Pérez",email:"juan@valle.com",phone:"+57 300 123 4567"},{id:"c2",name:"Snacks Premium S.A.",contact:"Maria Gomez",email:"compras@snacksp.com",phone:"+57 310 987 6543"}],ys=[{id:"s1",name:"Oben Holding",contact:"Ventas Corp",origin:"Importado"},{id:"s2",name:"Sigmaplast",contact:"Ejecutivo Cuenta",origin:"Nacional"},{id:"s3",name:"Dow Chemical",contact:"Soporte Técnico",origin:"Importado"},{id:"s4",name:"Jindal Films",contact:"",origin:"Importado"}],ws=[{id:"m1",internalCode:"MAT-001",name:"BOPP Transparente",supplier:"Oben Holding",type:T.BOPP,thickness:20,density:.91,width:850,currentStockKg:1200,costPerKg:3.5},{id:"m2",internalCode:"MAT-002",name:"BOPP Mate",supplier:"Sigmaplast",type:T.BOPP_MATE,thickness:20,density:.91,width:1e3,currentStockKg:500,costPerKg:4.2},{id:"m3",internalCode:"MAT-003",name:"BOPP Metalizado",supplier:"Oben Holding",type:T.BOPP_METALIZADO,thickness:20,density:.91,width:850,currentStockKg:800,costPerKg:3.8},{id:"m4",internalCode:"MAT-004",name:"PEBD Transparente",supplier:"Dow Chemical",type:T.PE,thickness:40,density:.92,width:850,currentStockKg:2e3,costPerKg:2.9},{id:"m5",internalCode:"MAT-005",name:"PET Std",supplier:"Jindal Films",type:T.PET,thickness:12,density:1.4,width:1e3,currentStockKg:150,costPerKg:3.1}],Cs=[{id:"p1",sku:"LEN-500G",name:"Lentejas 500g Tradicional",clientId:"c1",format:"BOLSA",finalReelWidth:0,bagWidth:200,bagHeight:300,gusset:0,cutoff:300,webWidth:840,tracks:4,cylinder:600,layer1:{type:T.BOPP,thickness:20,width:840},layer2:{type:T.PE,thickness:40,width:840},inkCoverage:3.5,adhesiveCoverage:1.8,specificScrapPercent:.05,windingDirection:"A1"}],Re={fixedStartupMeters:500,variableScrapPercent:.05},te=(t,l)=>{try{const i=localStorage.getItem(t);return i?JSON.parse(i):l}catch(i){return console.error(`Error loading ${t}`,i),l}},R=(t,l)=>{try{localStorage.setItem(t,JSON.stringify(l))}catch(i){console.error(`Error saving ${t}`,i)}};let he=null;const ue=t=>t.map(l=>{const i=l.layer1&&l.layer1.type?l.layer1:{type:T.BOPP,thickness:20,width:l.webWidth||0},r=l.layer2&&l.layer2.type?l.layer2:void 0,n=l.layer3&&l.layer3.type?l.layer3:void 0;return{...l,layer1:i,layer2:r,layer3:n}});let K=te("flexo_clients",vs),q=te("flexo_suppliers",ys),B=te("flexo_materials",ws),W=ue(te("flexo_products",Cs)),Z=te("flexo_config",Re),L=te("flexo_orders",[]);const M=async()=>{if(R("flexo_clients",K),R("flexo_suppliers",q),R("flexo_materials",B),R("flexo_products",W),R("flexo_orders",L),R("flexo_config",Z),he)try{const t={clients:K,suppliers:q,materials:B,products:W,orders:L,config:Z,lastModified:new Date().toISOString()},l=await he.createWritable();await l.write(JSON.stringify(t,null,2)),await l.close(),console.log("Auto-saved to Drive/Disk")}catch(t){console.error("Failed to auto-save to disk:",t)}},Ss=async()=>{if(typeof window.showOpenFilePicker!="function")return alert(`Tu navegador no soporta la sincronización automática (File System API). Esta función requiere Chrome, Edge o Opera en escritorio.

Para móviles o navegadores no soportados, usa la importación manual en Configuración.`),!1;try{const[t]=await window.showOpenFilePicker({types:[{description:"JSON Database",accept:{"application/json":[".json"]}}],multiple:!1});he=t;const i=await(await he.getFile()).text(),r=JSON.parse(i);return!r.clients||!r.materials?(alert("El archivo seleccionado no es una base de datos válida de PCP Enigma."),!1):(K=r.clients||[],q=r.suppliers||[],B=r.materials||[],W=ue(r.products||[]),L=r.orders||[],Z=r.config||Re,M(),!0)}catch(t){return t.name==="AbortError"?!1:t.name==="SecurityError"||t.message&&t.message.includes("Cross origin")?(alert(`⚠️ Restricción de Entorno Detectada

Estás ejecutando la App en un entorno restringido (iframe) que bloquea el acceso directo al disco duro.

SOLUCIÓN:
1. Ejecuta el proyecto localmente o despliégalo en GitHub Pages.
2. Mientras tanto, usa la opción 'Configuración > Importar/Restaurar' para cargar tus datos manualmente.`),!1):(console.error("Error connecting DB:",t),alert("Error al conectar: "+t.message),!1)}},se=()=>[...K],le=()=>[...q],ce=()=>[...B],re=()=>[...W],qe=()=>({...Z}),ee=()=>[...L].sort((t,l)=>(t.queueIndex||0)-(l.queueIndex||0)),Ps=t=>{const l=W.findIndex(i=>i.id===t.id);l>=0?W[l]=t:W.push(t),M()},ks=t=>{W=W.filter(l=>l.id!==t),M()},Es=t=>{const l=K.findIndex(i=>i.id===t.id);l>=0?K[l]=t:K.push(t),M()},Os=t=>{K=K.filter(l=>l.id!==t),M()},Ds=t=>{const l=q.findIndex(i=>i.id===t.id);l>=0?q[l]=t:q.push(t),M()},Is=t=>{q=q.filter(l=>l.id!==t),M()},As=t=>{const l=B.findIndex(i=>i.id===t.id);l>=0?B[l]=t:B.push(t),M()},Ts=t=>{B=B.filter(l=>l.id!==t),M()},Ls=t=>{if(t.queueIndex===void 0){const i=L.reduce((r,n)=>Math.max(r,n.queueIndex||0),0);t.queueIndex=i+1}const l=L.findIndex(i=>i.id===t.id);l>=0?L[l]=t:L.push(t),M()},Ms=(t,l)=>{const i=L.find(r=>r.id===t);i&&(i.status=l,M())},Bs=(t,l)=>{const i=L.find(r=>r.id===t);i&&(i.currentStage=l,M())},zs=t=>{t.forEach((l,i)=>{const r=L.find(n=>n.id===l.id);r&&(r.queueIndex=i)}),M()},Ks=t=>{L=L.filter(l=>l.id!==t),M()},je=(t,l)=>{const i=B.findIndex(r=>r.id===t);return i>=0?(B[i].currentStockKg=Math.max(0,B[i].currentStockKg-l),M(),!0):!1},_s=t=>{Z={...Z,...t},M()},Fs=()=>{const t=$.book_new(),l=L.map(u=>({Codigo:u.orderCode,Fecha:u.date,Cliente:u.clientName,Producto:u.productName,Estado:u.status,"Etapa Actual":u.currentStage||"Inicio",Pedido:`${u.quantityRequested} ${u.unit}`,"Metros Brutos":u.calculationSnapshot.grossLinearMeters,"Peso Total (Kg)":u.calculationSnapshot.totalWeightKg,Etapas:u.requiredStages.join(", ")})),i=$.json_to_sheet(l);$.book_append_sheet(t,i,"Historial Producción");const r=$.json_to_sheet(K);$.book_append_sheet(t,r,"Clientes");const n=$.json_to_sheet(q);$.book_append_sheet(t,n,"Proveedores");const o=$.json_to_sheet(B);$.book_append_sheet(t,o,"Inventario");const c=W.map(u=>{var w,b,E;const s=((w=K.find(x=>x.id===u.clientId))==null?void 0:w.name)||"N/A";return{SKU:u.sku,Producto:u.name,Cliente:s,Formato:u.format,"Ancho Impresión":u.webWidth,"Capa 1 Tipo":u.layer1.type,"Capa 1 Mic":u.layer1.thickness,"Capa 2 Tipo":((b=u.layer2)==null?void 0:b.type)||"-","Capa 3 Tipo":((E=u.layer3)==null?void 0:E.type)||"-","% Merma Ficha":u.specificScrapPercent?u.specificScrapPercent*100:"Default"}}),m=$.json_to_sheet(c);$.book_append_sheet(t,m,"Fichas Técnicas"),Ve(t,"PCP_Enigma_DB.xlsx")},Rs=()=>{const t={clients:K,suppliers:q,materials:B,products:W,orders:L,config:Z,exportedAt:new Date().toISOString()},l="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,2)),i=document.createElement("a");i.setAttribute("href",l),i.setAttribute("download",`pcp_backup_${new Date().toISOString().split("T")[0]}.json`),document.body.appendChild(i),i.click(),i.remove()},qs=async t=>new Promise((l,i)=>{const r=new FileReader;r.onload=n=>{var o;try{const c=JSON.parse((o=n.target)==null?void 0:o.result);if(!c.clients||!c.materials||!c.products){alert("Archivo inválido: Estructura de datos incorrecta."),l(!1);return}confirm("ADVERTENCIA: Esto borrará los datos actuales y cargará los del archivo. ¿Continuar?")?(R("flexo_clients",c.clients),R("flexo_suppliers",c.suppliers||[]),R("flexo_materials",c.materials),R("flexo_products",ue(c.products)),R("flexo_orders",c.orders),R("flexo_config",c.config),K=c.clients,q=c.suppliers||[],B=c.materials,W=ue(c.products),L=c.orders,Z=c.config,l(!0)):l(!1)}catch(c){console.error(c),alert("Error leyendo el archivo JSON."),l(!1)}},r.readAsText(t)}),Ws=({activeTab:t,setActiveTab:l})=>{const[i,r]=f.useState(!1),n=async()=>{const c=await Ss();r(c),c&&alert("Conectado con éxito. Los cambios se guardarán automáticamente en el archivo.")},o=[{id:"dashboard",label:"Dashboard",icon:He},{id:"queue",label:"Fila de Producción",icon:Je},{id:"calculator",label:"Calculadora Prod.",icon:Ze},{id:"products",label:"Fichas Técnicas",icon:Qe},{id:"materials",label:"Inventario",icon:Ne},{id:"suppliers",label:"Proveedores",icon:Oe},{id:"clients",label:"Clientes",icon:De}];return e.jsxs("aside",{className:"w-64 bg-slate-900 text-white h-screen fixed left-0 top-0 flex flex-col shadow-xl z-50",children:[e.jsxs("div",{className:"p-6 border-b border-slate-700",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-brand-500",children:"PCP"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Enigma v1.1"})]}),e.jsx("nav",{className:"flex-1 p-4 space-y-2",children:o.map(c=>{const m=c.icon;return e.jsxs("button",{onClick:()=>l(c.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors duration-200 ${t===c.id?"bg-brand-600 text-white shadow-lg":"text-slate-300 hover:bg-slate-800 hover:text-white"}`,children:[e.jsx(m,{size:20}),e.jsx("span",{className:"font-medium",children:c.label})]},c.id)})}),e.jsxs("div",{className:"p-4 bg-slate-800 mx-4 mb-4 rounded-lg border border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Estado Conexión"}),i?e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500 shadow-[0_0_5px_#22c55e]"}):e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-500"})]}),e.jsx("button",{onClick:n,className:`w-full text-xs font-bold py-2 px-2 rounded flex items-center justify-center transition-all ${i?"bg-green-900/30 text-green-400 border border-green-800 cursor-default":"bg-brand-700 hover:bg-brand-600 text-white shadow-md"}`,children:i?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{size:12,className:"mr-1.5"})," BD Sincronizada"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ye,{size:12,className:"mr-1.5"})," Conectar BD"]})})]}),e.jsx("div",{className:"p-4 border-t border-slate-700",children:e.jsxs("button",{onClick:()=>l("settings"),className:`flex items-center space-x-3 px-4 py-2 w-full transition-colors ${t==="settings"?"text-brand-400 font-bold":"text-slate-400 hover:text-white"}`,children:[e.jsx(ne,{size:18}),e.jsx("span",{className:"text-sm",children:"Configuración"})]})})]})},X=(t,l,i)=>{const r=t/1e3,n=Fe[i.type]||.91;return r*l*i.thickness*n/1e3},$s=(t,l,i,r,n)=>{const o=qe(),c=r.specificScrapPercent!==void 0?r.specificScrapPercent:o.variableScrapPercent,m=r.tracks>0?r.tracks:1;let u=0;if(i===J.METERS)u=t/m;else if(i===J.UNITS)u=t*r.cutoff/(m*1e3);else if(i===J.KILOS){let j=X(r.webWidth,1,r.layer1);r.layer2&&(j+=X(r.webWidth,1,r.layer2)),r.layer3&&(j+=X(r.webWidth,1,r.layer3));const y=r.webWidth/1e3,p=y*1*r.inkCoverage/1e3;let k=1;r.layer2&&k++,r.layer3&&k++;const z=k>1?(k-1)*(y*1*r.adhesiveCoverage)/1e3:0,V=j+p+z;u=t/V}const s=u*c,w=o.fixedStartupMeters+s,b=u+w,E=u*(l/100),x=b+E,N=X(r.webWidth,b,r.layer1),g=r.layer2?X(r.webWidth,b,r.layer2):0,d=r.layer3?X(r.webWidth,b,r.layer3):0,O=r.webWidth/1e3*b,_=O*r.inkCoverage/1e3;let U=0;return r.layer2&&(U+=O*r.adhesiveCoverage/1e3),r.layer3&&(U+=O*r.adhesiveCoverage/1e3),{requiredLinearMeters:Math.ceil(u),grossLinearMeters:Math.ceil(b),maxLinearMetersWithTolerance:Math.ceil(x),scrapMeters:Math.ceil(w),layer1Kg:Number(N.toFixed(2)),layer2Kg:Number(g.toFixed(2)),layer3Kg:Number(d.toFixed(2)),inkKg:Number(_.toFixed(2)),adhesiveKg:Number(U.toFixed(2)),totalWeightKg:Number((N+g+d+_+U).toFixed(2))}},Us=()=>{const t=se(),l=re(),i=ce(),[r,n]=f.useState(""),[o,c]=f.useState(""),[m,u]=f.useState(0),[s,w]=f.useState(10),[b,E]=f.useState(J.UNITS),[x,N]=f.useState({success:!1}),[g,d]=f.useState({}),[O,_]=f.useState({}),U=f.useMemo(()=>l.filter(h=>h.clientId===r),[r,l]),j=f.useMemo(()=>l.find(h=>h.id===o),[o,l]);f.useEffect(()=>{d({}),_({})},[o]);const y=(h,I)=>{const a=h.width||I;return i.filter(S=>S.type===h.type&&S.width>=a&&S.currentStockKg>0).map(S=>{const A=Math.abs(S.thickness-h.thickness),v=S.width-a,F=A/h.thickness,G=A===0,Y=[];G||(Y.push(`Espesor difiere en ${A}μ`),F>.2&&Y.push("¡FUERA DE TOLERANCIA DE ESPESOR!")),v>0&&Y.push(`+${v}mm de ancho`);let D=0;return G||(D+=1e3+A*100),D+=v,F>.3&&(D+=1e4),{material:S,isExactThickness:G,thicknessDiff:A,widthDiff:v,score:D,notes:Y}}).sort((S,A)=>S.score-A.score)};f.useEffect(()=>{if(j){const h=(I,a)=>{if(!a)return;const C=y(a,j.webWidth);C.length>0&&!g[I]&&d(P=>({...P,[I]:C[0].material.id}))};h("layer1",j.layer1),h("layer2",j.layer2),h("layer3",j.layer3)}},[j,m]);let p=null,k=null,z={layer1:{stockOk:!0,missingKg:0},layer2:{stockOk:!0,missingKg:0},layer3:{stockOk:!0,missingKg:0}};if(j&&m>0)try{p=$s(m,s,b,j,i);const h=(I,a)=>{const C=g[I];if(!C)return{stockOk:!1,missingKg:a};const P=i.find(S=>S.id===C);return P?P.currentStockKg<a?{stockOk:!1,missingKg:a-P.currentStockKg}:{stockOk:!0,missingKg:0}:{stockOk:!1,missingKg:a}};z.layer1=h("layer1",p.layer1Kg),j.layer2&&(z.layer2=h("layer2",p.layer2Kg)),j.layer3&&(z.layer3=h("layer3",p.layer3Kg))}catch(h){k=h.message}const V=()=>{var A;if(!p||!j)return;if(!g.layer1){alert("Debe seleccionar un material para la Capa 1");return}if(j.layer2&&!g.layer2){alert("Debe seleccionar un material para la Capa 2");return}if(j.layer3&&!g.layer3){alert("Debe seleccionar un material para la Capa 3");return}const h=[],I=[],a=(v,F,G)=>{if(F<=0)return;const Y=g[v],D=i.find(H=>H.id===Y);if(!D)return;I.push(D.name);const $e=O[v],ae=i.find(H=>H.id===$e);if(D.currentStockKg<F&&ae){const H=Math.max(0,D.currentStockKg),Ce=F-H;H>0&&(je(D.id,H),h.push({layer:G,materialName:D.name,internalCode:D.internalCode,width:D.width,requiredKg:Number(H.toFixed(2))})),je(ae.id,Ce),h.push({layer:`${G} (COMPLEMENTO)`,materialName:ae.name,internalCode:ae.internalCode,width:ae.width,requiredKg:Number(Ce.toFixed(2)),isSubstitute:!0,originalMaterialId:D.id})}else je(D.id,F),h.push({layer:G,materialName:D.name,internalCode:D.internalCode,width:D.width,requiredKg:Number(F.toFixed(2))})};a("layer1",p.layer1Kg,"Capa 1 (Imp)"),j.layer2&&a("layer2",p.layer2Kg,"Capa 2 (Lam)"),j.layer3&&a("layer3",p.layer3Kg,"Capa 3 (Sell)");const C=["Impresión"];j.layer2&&C.push("Laminación"),j.layer3&&C.push("Trilaminado"),C.push("Refilado"),j.format==="BOLSA"&&C.push("Confección (Bolsera)");const P=`OP-${1e3+ee().length+1}`,S={id:`ord-${Date.now()}`,orderCode:P,productId:j.id,productName:j.name,clientId:r,clientName:((A=t.find(v=>v.id===r))==null?void 0:A.name)||"Desconocido",date:new Date().toISOString().split("T")[0],quantityRequested:m,unit:b,tolerancePercent:s,calculationSnapshot:p,technicalDetails:{format:j.format,webWidth:j.webWidth,cylinder:j.cylinder,cutoff:j.cutoff,tracks:j.tracks,layers:I,windingDirection:j.windingDirection},materialRequirements:h,requiredStages:C,status:"Pendiente",currentStage:void 0};Ls(S),N({success:!0,code:P}),setTimeout(()=>{N({success:!1}),u(0)},4e3)},Q=({layerKey:h,spec:I,requiredKg:a,analysis:C})=>{if(!j)return null;const P=y(I,j.webWidth),S=g[h],A=i.find(v=>v.id===S);return e.jsxs("div",{className:"mb-6 bg-white border border-slate-200 rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800 uppercase text-sm",children:h==="layer1"?"Capa 1 (Impresión)":h==="layer2"?"Capa 2 (Laminación)":"Capa 3 (Sellante)"}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Req: ",I.type," ",I.thickness,"μ | Ancho Ideal: ",I.width||j.webWidth,"mm"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"text-xl font-bold text-slate-800",children:[a.toLocaleString()," Kg"]})})]}),e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-1",children:[P.length===0&&e.jsx("p",{className:"text-xs text-red-500 italic",children:"No hay inventario compatible para este tipo."}),P.map((v,F)=>e.jsxs("div",{onClick:()=>d(G=>({...G,[h]:v.material.id})),className:`p-2 rounded border cursor-pointer transition-all flex justify-between items-center
                            ${S===v.material.id?"bg-brand-50 border-brand-500 ring-1 ring-brand-500":"bg-slate-50 border-slate-200 hover:border-brand-300"}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-sm text-slate-800 flex items-center",children:[F===0&&e.jsx(ts,{size:12,className:"text-amber-500 mr-1"}),v.material.name,e.jsxs("span",{className:"ml-2 font-mono text-xs text-slate-500",children:["[",v.material.internalCode,"]"]})]}),e.jsxs("div",{className:"text-xs text-slate-600 flex space-x-2",children:[e.jsxs("span",{children:[v.material.width,"mm"]}),e.jsxs("span",{children:[v.material.thickness,"μ"]}),e.jsxs("span",{className:v.material.currentStockKg<a?"text-red-500 font-bold":"text-emerald-600 font-bold",children:["Stock: ",v.material.currentStockKg," Kg"]})]}),v.notes.length>0&&e.jsx("div",{className:"text-[10px] text-amber-600 font-bold mt-1",children:v.notes.join(" | ")})]}),S===v.material.id&&e.jsx(Ie,{size:18,className:"text-brand-600"})]},v.material.id))]}),A&&!C.stockOk&&e.jsxs("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded text-xs",children:[e.jsxs("p",{className:"font-bold text-red-700 flex items-center mb-2",children:[e.jsx(as,{size:14,className:"mr-1"})," Falta Stock: ",C.missingKg.toLocaleString()," Kg"]}),e.jsx("p",{className:"mb-2",children:"Seleccione una bobina adicional para completar:"}),e.jsxs("select",{className:"w-full border p-1 rounded",onChange:v=>_(F=>({...F,[h]:v.target.value})),value:O[h]||"",children:[e.jsx("option",{value:"",children:"-- Seleccionar Sustituto --"}),P.filter(v=>v.material.id!==S).map(v=>e.jsxs("option",{value:v.material.id,children:[v.material.name," (",v.material.width,"mm) - Stock: ",v.material.currentStockKg]},v.material.id))]})]})]})};return x.success?e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-12 text-center animate-fade-in",children:[e.jsx("div",{className:"bg-green-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Xe,{size:40,className:"text-green-600"})}),e.jsxs("h2",{className:"text-2xl font-bold text-green-800 mb-2",children:["¡Orden ",x.code," Generada!"]}),e.jsx("p",{className:"text-green-700 mb-4",children:"Se ha creado la hoja de ruta, guardado el historial y descontado el material."}),e.jsx("button",{onClick:()=>N({success:!1}),className:"mt-6 text-green-800 underline font-bold",children:"Volver a calcular"})]}):e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 mb-4 flex items-center",children:[e.jsx(Ae,{className:"mr-2 text-brand-600"}),"Calculadora de Producción"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Cliente"}),e.jsxs("select",{className:"w-full rounded-lg border-slate-300 border p-2.5 focus:ring-2 focus:ring-brand-500 focus:outline-none",value:r,onChange:h=>{n(h.target.value),c("")},children:[e.jsx("option",{value:"",children:"Seleccionar..."}),t.map(h=>e.jsx("option",{value:h.id,children:h.name},h.id))]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Producto (SKU)"}),e.jsxs("select",{className:"w-full rounded-lg border-slate-300 border p-2.5 focus:ring-2 focus:ring-brand-500 focus:outline-none",value:o,onChange:h=>c(h.target.value),disabled:!r,children:[e.jsx("option",{value:"",children:"Seleccionar Ficha..."}),U.map(h=>e.jsxs("option",{value:h.id,children:[h.sku," - ",h.name," (",h.format,")"]},h.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Cantidad Pedida"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"number",className:"w-full rounded-l-lg border-slate-300 border-y border-l p-2.5 focus:ring-2 focus:ring-brand-500 focus:outline-none",value:m||"",onChange:h=>u(Number(h.target.value)),placeholder:"0"}),e.jsxs("select",{className:"bg-slate-100 rounded-r-lg border-slate-300 border p-2.5 focus:outline-none text-sm",value:b,onChange:h=>E(h.target.value),children:[e.jsx("option",{value:J.UNITS,children:"Ud."}),e.jsx("option",{value:J.KILOS,children:"Kg"}),e.jsx("option",{value:J.METERS,children:"m"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Tolerancia (+)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",className:"w-full rounded-lg border-slate-300 border p-2.5 focus:ring-2 focus:ring-brand-500 focus:outline-none pr-8",value:s,onChange:h=>w(Number(h.target.value))}),e.jsx("span",{className:"absolute right-3 top-2.5 text-slate-400 font-bold",children:"%"})]})]})]}),k&&e.jsxs("div",{className:"mt-4 p-3 bg-red-50 text-red-700 rounded-lg flex items-center text-sm font-medium",children:[e.jsx(me,{className:"mr-2",size:18})," ",k]})]}),p&&j&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-slate-900 text-white rounded-xl shadow-lg p-6",children:[e.jsx("h3",{className:"text-sm font-bold uppercase text-slate-400 mb-4",children:"Metros a Producir (Bruto)"}),e.jsxs("div",{className:"text-4xl font-bold mb-2 text-brand-400",children:[p.grossLinearMeters.toLocaleString()," m"]}),e.jsxs("div",{className:"text-sm text-slate-400 mb-4",children:["Incluye ",p.scrapMeters,"m de merma"]}),e.jsxs("div",{className:"border-t border-slate-700 pt-4 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"block text-xs text-slate-500 uppercase",children:["Máximo (+",s,"%)"]}),e.jsxs("span",{className:"block text-lg font-bold",children:[p.maxLinearMetersWithTolerance.toLocaleString()," m"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-xs text-slate-500 uppercase",children:"Pedido Neto"}),e.jsxs("span",{className:"block text-lg font-bold",children:[p.requiredLinearMeters.toLocaleString()," m"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center uppercase text-sm",children:[e.jsx(es,{size:16,className:"mr-2"})," Insumos Estimados"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between border-b border-slate-100 pb-2",children:[e.jsx("span",{className:"text-slate-600",children:"Tintas Total"}),e.jsxs("span",{className:"font-bold text-slate-800",children:[p.inkKg," Kg"]})]}),e.jsxs("div",{className:"flex justify-between border-b border-slate-100 pb-2",children:[e.jsx("span",{className:"text-slate-600",children:"Adhesivos"}),e.jsxs("span",{className:"font-bold text-slate-800",children:[p.adhesiveKg," Kg"]})]}),e.jsxs("div",{className:"flex justify-between pt-2",children:[e.jsx("span",{className:"text-brand-600 font-bold",children:"Peso Total Orden"}),e.jsxs("span",{className:"font-bold text-xl text-brand-700",children:[p.totalWeightKg.toLocaleString()," Kg"]})]})]})]}),e.jsxs("button",{onClick:V,disabled:!g.layer1||!!j.layer2&&!g.layer2||!!j.layer3&&!g.layer3,className:"w-full py-4 bg-brand-600 hover:bg-brand-700 disabled:bg-slate-300 disabled:cursor-not-allowed text-white rounded-xl font-bold text-lg shadow-lg transition-all flex justify-center items-center",children:[e.jsx(ss,{size:24,className:"mr-2"})," Confirmar Producción"]})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"bg-slate-100 rounded-xl p-6 h-full",children:[e.jsxs("h3",{className:"font-bold text-slate-700 mb-4 flex items-center uppercase text-sm",children:[e.jsx(ie,{size:16,className:"mr-2"})," Asignación de Materiales"]}),e.jsxs("p",{className:"text-xs text-slate-500 mb-6",children:["Seleccione la bobina exacta del inventario para cada capa.",e.jsx("br",{}),e.jsx("span",{className:"text-brand-600 font-bold",children:"Nota:"})," Se muestran solo materiales compatibles (Mismo Tipo, Ancho ",">="," ",j.webWidth,"mm)."]}),e.jsx(Q,{layerKey:"layer1",spec:j.layer1,requiredKg:p.layer1Kg,analysis:z.layer1}),j.layer2&&e.jsx(Q,{layerKey:"layer2",spec:j.layer2,requiredKg:p.layer2Kg,analysis:z.layer2}),j.layer3&&e.jsx(Q,{layerKey:"layer3",spec:j.layer3,requiredKg:p.layer3Kg,analysis:z.layer3})]})})]})]})},Gs=()=>{var p,k,z,V,Q,h,I;ce();const t=se(),[l,i]=f.useState("list"),[r,n]=f.useState(re()),[o,c]=f.useState(""),m={type:T.BOPP,thickness:20,width:0},u={format:"BOBINA",tracks:1,inkCoverage:3,adhesiveCoverage:1.8,specificScrapPercent:.05,windingDirection:"A1",layer1:{...m}},[s,w]=f.useState(u),[b,E]=f.useState(!1);f.useEffect(()=>{n(re())},[l]);const x=a=>{w(a),i("form")},N=a=>{confirm("¿Estás seguro de eliminar esta ficha técnica? Se borrará del historial.")&&(ks(a),n(re()))},g=a=>{if(a.preventDefault(),s.name&&s.clientId&&s.layer1){const C={...s,id:s.id||`p${Date.now()}`};Ps(C),E(!0),setTimeout(()=>{E(!1),i("list")},1500)}},d=(a,C)=>{w(P=>({...P,[a]:C}))},O=(a,C,P)=>{w(S=>{const A=S[a]||{...m};return{...S,[a]:{...A,[C]:P}}})},_=(a,C)=>{w(P=>{if(C)return{...P,[a]:{...m}};{const S={...P};return delete S[a],S}})},U=()=>{l==="list"?(w(u),i("form")):i("list")},j=[...["A","B","C","D","E","F","G"].flatMap(a=>[1,2,3,4,5,6].map(C=>`${a}${C}`))],y=r.filter(a=>a.name.toLowerCase().includes(o.toLowerCase())||a.sku.toLowerCase().includes(o.toLowerCase()));return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white p-4 rounded-xl shadow-sm border border-slate-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:l==="list"?"Fichas Técnicas":s.id?"Editar Ficha":"Nueva Ficha Técnica"}),e.jsx("p",{className:"text-sm text-slate-500",children:l==="list"?"Gestiona las recetas de producción":"Define estructura ideal y parámetros"})]}),e.jsx("button",{onClick:U,className:`px-4 py-2 rounded-lg font-medium text-sm flex items-center transition-colors ${l==="list"?"bg-brand-600 text-white hover:bg-brand-700 shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:l==="list"?e.jsxs(e.Fragment,{children:[e.jsx(be,{size:18,className:"mr-2"})," Nueva Ficha"]}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{size:18,className:"mr-2"})," Ver Listado"]})})]}),l==="list"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-slate-100",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(Te,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o SKU...",className:"pl-10 pr-4 py-2 w-full border rounded-lg focus:ring-2 focus:ring-brand-500 outline-none",value:o,onChange:a=>c(a.target.value)})]})}),e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 text-slate-500 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 font-semibold",children:"SKU / Producto"}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Estructura"}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Dimensiones"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-right",children:"Acciones"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[y.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-12 text-center text-slate-400",children:"No hay productos registrados."})}),y.map(a=>{var P,S,A;const C=((P=t.find(v=>v.id===a.clientId))==null?void 0:P.name)||"N/A";return e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-bold text-slate-800",children:a.name}),e.jsx("div",{className:"text-xs text-slate-500 font-mono",children:a.sku})]}),e.jsx("td",{className:"px-6 py-4 text-slate-600",children:C}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{className:"font-bold text-brand-700",children:[((S=a.layer1)==null?void 0:S.type)||"N/A"," ",((A=a.layer1)==null?void 0:A.thickness)||0,"μ"]}),a.layer2&&e.jsxs("div",{className:"text-slate-600",children:["+ ",a.layer2.type," ",a.layer2.thickness,"μ"]}),a.layer3&&e.jsxs("div",{className:"text-slate-600",children:["+ ",a.layer3.type," ",a.layer3.thickness,"μ"]})]})}),e.jsxs("td",{className:"px-6 py-4 text-slate-600 text-xs space-y-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Le,{size:12,className:"mr-1"})," Ancho Imp: ",a.webWidth,"mm"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ie,{size:12,className:"mr-1"})," Pistas: ",a.tracks]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ve,{size:12,className:"mr-1"})," Paso: ",a.cutoff,"mm"]})]}),e.jsxs("td",{className:"px-6 py-4 text-right space-x-2 opacity-60 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>x(a),className:"text-brand-600 hover:bg-brand-50 p-1.5 rounded tooltip",title:"Editar",children:e.jsx(rs,{size:18})}),e.jsx("button",{onClick:()=>N(a.id),className:"text-red-500 hover:bg-red-50 p-1.5 rounded tooltip",title:"Eliminar",children:e.jsx(de,{size:18})})]})]},a.id)})]})]})]}),l==="form"&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 max-w-5xl mx-auto p-8 animate-fade-in",children:e.jsxs("form",{onSubmit:g,className:"space-y-8",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-slate-400 mb-4",children:"1. Información Comercial"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label-text",children:"Cliente"}),e.jsxs("select",{className:"input-field",required:!0,value:s.clientId,onChange:a=>d("clientId",a.target.value),children:[e.jsx("option",{value:"",children:"Seleccionar..."}),t.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text",children:"SKU / Código"}),e.jsx("input",{type:"text",className:"input-field",placeholder:"Ej. BOL-500G",value:s.sku||"",onChange:a=>d("sku",a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text",children:"Nombre del Producto"}),e.jsx("input",{type:"text",className:"input-field",placeholder:"Ej. Bolsa Arroz 500g Premium",required:!0,value:s.name||"",onChange:a=>d("name",a.target.value)})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-slate-400 mb-4",children:"2. Formato y Dimensiones"}),e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsxs("button",{type:"button",onClick:()=>d("format","BOBINA"),className:`flex items-center px-6 py-3 rounded-lg border-2 transition-all ${s.format==="BOBINA"?"border-brand-500 bg-brand-50 text-brand-700":"border-slate-200 text-slate-500 hover:border-slate-300"}`,children:[e.jsx(ns,{className:"mr-2",size:20})," Bobina (Reel)"]}),e.jsxs("button",{type:"button",onClick:()=>d("format","BOLSA"),className:`flex items-center px-6 py-3 rounded-lg border-2 transition-all ${s.format==="BOLSA"?"border-brand-500 bg-brand-50 text-brand-700":"border-slate-200 text-slate-500 hover:border-slate-300"}`,children:[e.jsx(ve,{className:"mr-2",size:20})," Bolsa (Bag)"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 bg-slate-50 p-6 rounded-lg border border-slate-200",children:[s.format==="BOBINA"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"label-text text-brand-600",children:"Ancho Final Bobina (mm)"}),e.jsx("input",{type:"number",className:"input-field",required:!0,value:s.finalReelWidth||"",onChange:a=>d("finalReelWidth",Number(a.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text text-brand-600",children:"Paso / Cutoff (mm)"}),e.jsx("input",{type:"number",className:"input-field",required:!0,value:s.cutoff||"",onChange:a=>d("cutoff",Number(a.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text",children:"Sentido Bobinado"}),e.jsx("select",{className:"input-field",value:s.windingDirection,onChange:a=>d("windingDirection",a.target.value),children:j.map(a=>e.jsx("option",{value:a,children:a},a))})]})]}),s.format==="BOLSA"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"label-text text-brand-600",children:"Ancho Bolsa / Paso (mm)"}),e.jsx("input",{type:"number",className:"input-field",required:!0,value:s.bagWidth||"",onChange:a=>{d("bagWidth",Number(a.target.value)),d("cutoff",Number(a.target.value))}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text text-slate-600",children:"Alto / Largo (mm)"}),e.jsx("input",{type:"number",className:"input-field",required:!0,value:s.bagHeight||"",onChange:a=>{d("bagHeight",Number(a.target.value))}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text",children:"Fuelle (mm)"}),e.jsx("input",{type:"number",className:"input-field",placeholder:"0",value:s.gusset||"",onChange:a=>d("gusset",Number(a.target.value))})]})]}),e.jsxs("div",{className:"border-l border-slate-300 pl-6 md:col-span-1 col-span-2",children:[e.jsx("label",{className:"label-text text-slate-900 font-bold",children:"Ingeniería"}),e.jsxs("div",{className:"space-y-3 mt-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500",children:"Pistas (Montaje)"}),e.jsx("input",{type:"number",className:"input-field py-1",min:"1",required:!0,value:s.tracks||1,onChange:a=>d("tracks",Number(a.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500",children:"Desarrollo Cilindro (mm)"}),e.jsx("input",{type:"number",className:"input-field py-1",required:!0,value:s.cylinder||"",onChange:a=>d("cylinder",Number(a.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-brand-600 font-bold",children:"Ancho Impresión (mm)"}),e.jsx("input",{type:"number",className:"input-field py-1 border-brand-300 bg-white",required:!0,value:s.webWidth||"",onChange:a=>d("webWidth",Number(a.target.value))})]})]})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-sm font-bold uppercase tracking-wider text-slate-400 mb-4",children:"3. Estructura y Receta Ideal"}),e.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Define el material ideal. La calculadora buscará el stock que mejor se ajuste."}),e.jsxs("div",{className:"space-y-6 p-6 bg-slate-50 rounded-xl border border-slate-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"label-text text-brand-700 font-bold",children:"Capa 1 (Impresión)"}),e.jsx("select",{className:"input-field font-bold",value:((p=s.layer1)==null?void 0:p.type)||T.BOPP,onChange:a=>O("layer1","type",a.target.value),children:Object.values(T).map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text",children:"Espesor (μm)"}),e.jsx("input",{type:"number",className:"input-field",placeholder:"20",required:!0,value:((k=s.layer1)==null?void 0:k.thickness)||"",onChange:a=>O("layer1","thickness",Number(a.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text",children:"Ancho Ideal (mm)"}),e.jsx("input",{type:"number",className:"input-field",placeholder:(z=s.webWidth)==null?void 0:z.toString(),value:((V=s.layer1)==null?void 0:V.width)||"",onChange:a=>O("layer1","width",Number(a.target.value))}),e.jsx("span",{className:"text-[10px] text-slate-400",children:"Dejar vacío para usar Ancho Imp."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text",children:"Tinta (g/m²)"}),e.jsx("input",{type:"number",step:"0.1",className:"input-field",value:s.inkCoverage,onChange:a=>d("inkCoverage",Number(a.target.value))})]}),s.webWidth&&((Q=s.layer1)==null?void 0:Q.width)&&s.layer1.width<s.webWidth&&e.jsxs("div",{className:"md:col-span-4 bg-red-50 text-red-700 p-2 rounded text-xs flex items-center",children:[e.jsx(me,{size:14,className:"mr-2"}),"El ancho del material (",s.layer1.width,"mm) es MENOR al ancho de impresión (",s.webWidth,"mm)."]})]}),e.jsxs("div",{className:"relative border-t border-slate-200 pt-4 mt-2",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"checkbox",id:"hasLayer2",className:"mr-2",checked:!!s.layer2,onChange:a=>_("layer2",a.target.checked)}),e.jsx("label",{htmlFor:"hasLayer2",className:"text-sm font-bold text-slate-700 select-none cursor-pointer",children:"Capa 2 (Laminación)"})]}),s.layer2&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end animate-fade-in",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsx("select",{className:"input-field",value:s.layer2.type,onChange:a=>O("layer2","type",a.target.value),children:Object.values(T).map(a=>e.jsx("option",{value:a,children:a},a))})}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text",children:"Espesor (μm)"}),e.jsx("input",{type:"number",className:"input-field",required:!0,value:s.layer2.thickness,onChange:a=>O("layer2","thickness",Number(a.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text",children:"Ancho Ideal (mm)"}),e.jsx("input",{type:"number",className:"input-field",placeholder:(h=s.webWidth)==null?void 0:h.toString(),value:s.layer2.width||"",onChange:a=>O("layer2","width",Number(a.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text",children:"Adhesivo (g/m²)"}),e.jsx("input",{type:"number",step:"0.1",className:"input-field",value:s.adhesiveCoverage,onChange:a=>d("adhesiveCoverage",Number(a.target.value))})]}),s.webWidth&&s.layer2.width&&s.layer2.width<s.webWidth&&e.jsxs("div",{className:"md:col-span-4 bg-red-50 text-red-700 p-2 rounded text-xs flex items-center",children:[e.jsx(me,{size:14,className:"mr-2"}),"El ancho del material (",s.layer2.width,"mm) es MENOR al ancho de impresión (",s.webWidth,"mm)."]})]})]}),e.jsxs("div",{className:"relative border-t border-slate-200 pt-4 mt-2",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"checkbox",id:"hasLayer3",className:"mr-2",checked:!!s.layer3,onChange:a=>_("layer3",a.target.checked)}),e.jsx("label",{htmlFor:"hasLayer3",className:"text-sm font-bold text-slate-700 select-none cursor-pointer",children:"Capa 3 (Trilaminado)"})]}),s.layer3&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end animate-fade-in",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsx("select",{className:"input-field",value:s.layer3.type,onChange:a=>O("layer3","type",a.target.value),children:Object.values(T).map(a=>e.jsx("option",{value:a,children:a},a))})}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text",children:"Espesor (μm)"}),e.jsx("input",{type:"number",className:"input-field",required:!0,value:s.layer3.thickness,onChange:a=>O("layer3","thickness",Number(a.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label-text",children:"Ancho Ideal (mm)"}),e.jsx("input",{type:"number",className:"input-field",placeholder:(I=s.webWidth)==null?void 0:I.toString(),value:s.layer3.width||"",onChange:a=>O("layer3","width",Number(a.target.value))})]}),s.webWidth&&s.layer3.width&&s.layer3.width<s.webWidth&&e.jsxs("div",{className:"md:col-span-4 bg-red-50 text-red-700 p-2 rounded text-xs flex items-center",children:[e.jsx(me,{size:14,className:"mr-2"}),"El ancho del material (",s.layer3.width,"mm) es MENOR al ancho de impresión (",s.webWidth,"mm)."]})]})]})]})]}),e.jsxs("div",{className:"pt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>i("list"),className:"px-6 py-3 rounded-lg font-medium text-slate-600 hover:bg-slate-100",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"flex items-center bg-brand-600 hover:bg-brand-700 text-white px-8 py-3 rounded-lg font-bold shadow-lg transition-all hover:scale-105",children:[e.jsx(oe,{className:"mr-2"})," Guardar Ficha Técnica"]})]}),b&&e.jsx("div",{className:"p-4 bg-green-50 text-green-700 rounded-lg text-center font-medium border border-green-200 animate-bounce",children:"¡Ficha técnica guardada exitosamente!"})]})}),e.jsx("style",{children:`
        .label-text { display: block; font-size: 0.875rem; font-weight: 500; color: #475569; margin-bottom: 0.25rem; }
        .input-field { width: 100%; border-radius: 0.5rem; border: 1px solid #cbd5e1; padding: 0.625rem; outline: none; transition: border-color 0.2s; }
        .input-field:focus { border-color: #0ea5e9; ring: 2px; ring-color: #0ea5e9; }
      `})]})},Vs=()=>{const[t,l]=f.useState(se()),[i,r]=f.useState(!1),[n,o]=f.useState({}),c=()=>l(se()),m=s=>{s.preventDefault(),n.name&&(Es({id:n.id||`c${Date.now()}`,name:n.name,contact:n.contact||"",email:n.email||"",phone:n.phone||""}),r(!1),o({}),c())},u=s=>{confirm("¿Estás seguro de eliminar este cliente?")&&(Os(s),c())};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center",children:[e.jsx(De,{className:"mr-2 text-brand-600"})," Gestión de Clientes"]}),e.jsxs("button",{onClick:()=>{o({}),r(!0)},className:"bg-brand-600 text-white px-4 py-2 rounded-lg flex items-center hover:bg-brand-700 transition-colors",children:[e.jsx(be,{size:18,className:"mr-1"})," Nuevo Cliente"]})]}),i&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-brand-200 mb-6",children:[e.jsxs("h3",{className:"font-bold text-slate-700 mb-4",children:[n.id?"Editar":"Crear"," Cliente"]}),e.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 mb-1",children:"Razón Social"}),e.jsx("input",{className:"w-full border p-2 rounded focus:ring-2 focus:ring-brand-500 outline-none",value:n.name||"",onChange:s=>o({...n,name:s.target.value}),required:!0,placeholder:"Ej. Alimentos SAS"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 mb-1",children:"Contacto"}),e.jsx("input",{className:"w-full border p-2 rounded focus:ring-2 focus:ring-brand-500 outline-none",value:n.contact||"",onChange:s=>o({...n,contact:s.target.value}),placeholder:"Nombre del encargado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 mb-1",children:"Email"}),e.jsx("input",{className:"w-full border p-2 rounded focus:ring-2 focus:ring-brand-500 outline-none",value:n.email||"",onChange:s=>o({...n,email:s.target.value}),placeholder:"contacto@cliente.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 mb-1",children:"Teléfono"}),e.jsx("input",{className:"w-full border p-2 rounded focus:ring-2 focus:ring-brand-500 outline-none",value:n.phone||"",onChange:s=>o({...n,phone:s.target.value}),placeholder:"+57 ..."})]}),e.jsxs("div",{className:"md:col-span-2 flex justify-end space-x-3 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>r(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 flex items-center",children:[e.jsx(oe,{size:18,className:"mr-2"})," Guardar"]})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 text-slate-500 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Nombre"}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Contacto"}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Email"}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Teléfono"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-right",children:"Acciones"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[t.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-slate-400",children:"No hay clientes registrados"})}),t.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-3 font-medium text-slate-800",children:s.name}),e.jsx("td",{className:"px-6 py-3 text-slate-600",children:s.contact}),e.jsx("td",{className:"px-6 py-3 text-slate-600",children:s.email||"-"}),e.jsx("td",{className:"px-6 py-3 text-slate-600",children:s.phone||"-"}),e.jsxs("td",{className:"px-6 py-3 text-right space-x-2",children:[e.jsx("button",{onClick:()=>{o(s),r(!0)},className:"text-brand-600 hover:text-brand-800 font-medium",children:"Editar"}),e.jsx("button",{onClick:()=>u(s.id),className:"text-red-500 hover:text-red-700",children:e.jsx(de,{size:18})})]})]},s.id))]})]})})]})},Hs=()=>{const[t,l]=f.useState(ce()),[i,r]=f.useState(le()),[n,o]=f.useState(!1),[c,m]=f.useState({}),[u,s]=f.useState(""),w=()=>{l(ce()),r(le())};f.useEffect(()=>{n&&r(le())},[n]);const b=d=>{d.preventDefault(),c.name&&c.internalCode&&(As({id:c.id||`m${Date.now()}`,internalCode:c.internalCode,name:c.name,supplier:c.supplier,type:c.type||T.BOPP,thickness:Number(c.thickness)||0,density:Number(c.density)||0,width:Number(c.width)||0,currentStockKg:Number(c.currentStockKg)||0,costPerKg:Number(c.costPerKg)||0}),o(!1),m({}),w())},E=d=>{confirm("¿Eliminar material? Esto podría afectar recetas existentes.")&&(Ts(d),w())},x=d=>{m({...c,type:d,density:Fe[d]})},N=t.filter(d=>d.name.toLowerCase().includes(u.toLowerCase())||d.internalCode.toLowerCase().includes(u.toLowerCase())),g=["BOPP Transparente","BOPP Mate","BOPP Metalizado","BOPP Blanco","BOPP Perlado","PET Transparente","PET Metalizado","PET DT","PET PVDC","PEBD Transparente","PEBD Blanco","CPP Transparente","CPP Metalizado","BOPP DT","BOPA (Nylon)"];return e.jsxs("div",{className:"space-y-6 animate-fade-in relative",children:[e.jsx("datalist",{id:"material-names",children:g.map(d=>e.jsx("option",{value:d},d))}),e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center",children:[e.jsx(Ne,{className:"mr-2 text-brand-600"})," Gestión de Inventario"]}),e.jsx("p",{className:"text-sm text-slate-500",children:"Administra bobinas, anchos y existencias"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Te,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),e.jsx("input",{type:"text",placeholder:"Buscar código o nombre...",className:"pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-brand-500 outline-none w-64",value:u,onChange:d=>s(d.target.value)})]}),e.jsxs("button",{onClick:()=>{m({type:T.BOPP,density:.91}),o(!0)},className:"bg-brand-600 text-white px-4 py-2 rounded-lg flex items-center hover:bg-brand-700 transition-colors shadow-md",children:[e.jsx(be,{size:18,className:"mr-1"})," Ingresar Material"]})]})]}),n&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-2xl border border-brand-200 w-full max-w-4xl max-h-[90vh] overflow-y-auto animate-fade-in relative",children:[e.jsx("button",{onClick:()=>o(!1),className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600",children:e.jsx(Me,{size:24})}),e.jsxs("h3",{className:"font-bold text-slate-700 mb-6 text-xl border-b pb-2 flex items-center",children:[e.jsx(Ne,{className:"mr-2 text-brand-600"}),c.id?"Editar":"Ingresar"," Bobina al Inventario"]}),e.jsxs("form",{onSubmit:b,className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-1",children:"Código Interno"}),e.jsx("input",{className:"w-full border p-2 rounded focus:ring-2 focus:ring-brand-500 outline-none font-mono bg-slate-50",value:c.internalCode||"",onChange:d=>m({...c,internalCode:d.target.value}),required:!0,placeholder:"Ej. MP-1023",autoFocus:!0})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-1",children:"Descripción"}),e.jsx("input",{list:"material-names",className:"w-full border p-2 rounded focus:ring-2 focus:ring-brand-500 outline-none",value:c.name||"",onChange:d=>m({...c,name:d.target.value}),required:!0,placeholder:"Ej. BOPP Metalizado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-1",children:"Proveedor"}),e.jsxs("div",{className:"relative",children:[e.jsx(pe,{className:"absolute left-2 top-2 text-slate-400",size:16}),e.jsxs("select",{className:"w-full border p-2 pl-8 rounded focus:ring-2 focus:ring-brand-500 outline-none",value:c.supplier||"",onChange:d=>m({...c,supplier:d.target.value}),children:[e.jsx("option",{value:"",children:"Seleccionar Proveedor..."}),i.map(d=>e.jsx("option",{value:d.name,children:d.name},d.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-1",children:"Tipo"}),e.jsx("select",{className:"w-full border p-2 rounded focus:ring-2 focus:ring-brand-500 outline-none",value:c.type,onChange:d=>x(d.target.value),children:Object.values(T).map(d=>e.jsx("option",{value:d,children:d},d))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-1",children:"Espesor (μm)"}),e.jsx("input",{type:"number",step:"0.1",className:"w-full border p-2 rounded focus:ring-2 focus:ring-brand-500 outline-none",value:c.thickness||"",onChange:d=>m({...c,thickness:Number(d.target.value)}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-slate-500 mb-1",children:"Densidad (g/cm³)"}),e.jsx("input",{type:"number",step:"0.01",className:"w-full border p-2 rounded focus:ring-2 focus:ring-brand-500 outline-none bg-slate-50",value:c.density||"",onChange:d=>m({...c,density:Number(d.target.value)}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-brand-600 mb-1",children:"Ancho Bobina (mm)"}),e.jsx("input",{type:"number",className:"w-full border-2 border-brand-100 p-2 rounded focus:ring-2 focus:ring-brand-500 outline-none",value:c.width||"",onChange:d=>m({...c,width:Number(d.target.value)}),required:!0,placeholder:"Ancho real"})]}),e.jsxs("div",{className:"bg-emerald-50 p-2 rounded border border-emerald-100 md:col-start-4",children:[e.jsx("label",{className:"block text-xs font-bold uppercase text-emerald-700 mb-1",children:"Stock Actual (Kg)"}),e.jsx("input",{type:"number",step:"0.1",className:"w-full border border-emerald-300 p-2 rounded focus:ring-2 focus:ring-emerald-500 outline-none text-emerald-800 font-bold",value:c.currentStockKg||"",onChange:d=>m({...c,currentStockKg:Number(d.target.value)}),required:!0,placeholder:"0.00"})]}),e.jsxs("div",{className:"md:col-span-4 flex justify-end space-x-3 mt-4 pt-4 border-t border-slate-100",children:[e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 flex items-center shadow-lg",children:[e.jsx(oe,{size:18,className:"mr-2"})," Guardar en Inventario"]})]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 text-slate-500 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Código"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Material"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Prov."}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Ancho"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Micras"}),e.jsx("th",{className:"px-4 py-3 font-semibold text-right",children:"Stock (Kg)"}),e.jsx("th",{className:"px-4 py-3 font-semibold text-right",children:"Acciones"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[N.map(d=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors group",children:[e.jsx("td",{className:"px-4 py-3 font-mono text-slate-500 text-xs",children:d.internalCode}),e.jsxs("td",{className:"px-4 py-3 font-medium text-slate-800",children:[d.name,e.jsxs("span",{className:"block text-xs text-slate-400",children:[d.type," | Dens: ",d.density]})]}),e.jsx("td",{className:"px-4 py-3 text-slate-600 text-xs",children:d.supplier||"-"}),e.jsxs("td",{className:"px-4 py-3 text-slate-700 font-medium",children:[d.width," mm"]}),e.jsxs("td",{className:"px-4 py-3 text-slate-600",children:[d.thickness," μ"]}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("span",{className:`font-bold px-2 py-1 rounded ${d.currentStockKg<100?"bg-red-100 text-red-700":"bg-emerald-50 text-emerald-700"}`,children:[d.currentStockKg.toLocaleString()," Kg"]})}),e.jsxs("td",{className:"px-4 py-3 text-right space-x-2 opacity-60 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>{m(d),o(!0)},className:"text-brand-600 hover:text-brand-800 font-medium p-1 hover:bg-brand-50 rounded",children:"Editar"}),e.jsx("button",{onClick:()=>E(d.id),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-50 rounded",children:e.jsx(de,{size:16})})]})]},d.id)),N.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-slate-400",children:"No se encontraron materiales con ese criterio."})})]})]})})]})},Js=()=>{const[t,l]=f.useState(le()),[i,r]=f.useState(!1),[n,o]=f.useState({}),c=()=>l(le()),m=s=>{s.preventDefault(),n.name&&(Ds({id:n.id||`s${Date.now()}`,name:n.name,contact:n.contact||"",email:n.email||"",phone:n.phone||"",origin:n.origin||"Nacional"}),r(!1),o({}),c())},u=s=>{confirm("¿Estás seguro de eliminar este proveedor?")&&(Is(s),c())};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center",children:[e.jsx(Oe,{className:"mr-2 text-brand-600"})," Gestión de Proveedores"]}),e.jsxs("button",{onClick:()=>{o({}),r(!0)},className:"bg-brand-600 text-white px-4 py-2 rounded-lg flex items-center hover:bg-brand-700 transition-colors",children:[e.jsx(be,{size:18,className:"mr-1"})," Nuevo Proveedor"]})]}),i&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-brand-200 mb-6",children:[e.jsxs("h3",{className:"font-bold text-slate-700 mb-4",children:[n.id?"Editar":"Crear"," Proveedor"]}),e.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 mb-1",children:"Razón Social"}),e.jsx("input",{className:"w-full border p-2 rounded focus:ring-2 focus:ring-brand-500 outline-none",value:n.name||"",onChange:s=>o({...n,name:s.target.value}),required:!0,placeholder:"Ej. Oben Holding"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 mb-1",children:"Origen"}),e.jsxs("select",{className:"w-full border p-2 rounded focus:ring-2 focus:ring-brand-500 outline-none",value:n.origin||"Nacional",onChange:s=>o({...n,origin:s.target.value}),children:[e.jsx("option",{value:"Nacional",children:"Nacional"}),e.jsx("option",{value:"Importado",children:"Importado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 mb-1",children:"Contacto"}),e.jsx("input",{className:"w-full border p-2 rounded focus:ring-2 focus:ring-brand-500 outline-none",value:n.contact||"",onChange:s=>o({...n,contact:s.target.value}),placeholder:"Nombre del encargado"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 mb-1",children:"Email"}),e.jsx("input",{className:"w-full border p-2 rounded focus:ring-2 focus:ring-brand-500 outline-none",value:n.email||"",onChange:s=>o({...n,email:s.target.value}),placeholder:"ventas@proveedor.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-500 mb-1",children:"Teléfono"}),e.jsx("input",{className:"w-full border p-2 rounded focus:ring-2 focus:ring-brand-500 outline-none",value:n.phone||"",onChange:s=>o({...n,phone:s.target.value}),placeholder:"+57 ..."})]}),e.jsxs("div",{className:"md:col-span-2 flex justify-end space-x-3 mt-2",children:[e.jsx("button",{type:"button",onClick:()=>r(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg",children:"Cancelar"}),e.jsxs("button",{type:"submit",className:"px-6 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 flex items-center",children:[e.jsx(oe,{size:18,className:"mr-2"})," Guardar"]})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 text-slate-500 uppercase",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Nombre"}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Origen"}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Contacto"}),e.jsx("th",{className:"px-6 py-3 font-semibold",children:"Teléfono"}),e.jsx("th",{className:"px-6 py-3 font-semibold text-right",children:"Acciones"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-100",children:[t.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-slate-400",children:"No hay proveedores registrados"})}),t.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-3 font-medium text-slate-800",children:s.name}),e.jsx("td",{className:"px-6 py-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${s.origin==="Importado"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:s.origin})}),e.jsxs("td",{className:"px-6 py-3 text-slate-600",children:[e.jsx("div",{children:s.contact}),e.jsx("div",{className:"text-xs text-slate-400",children:s.email})]}),e.jsx("td",{className:"px-6 py-3 text-slate-600",children:s.phone||"-"}),e.jsxs("td",{className:"px-6 py-3 text-right space-x-2",children:[e.jsx("button",{onClick:()=>{o(s),r(!0)},className:"text-brand-600 hover:text-brand-800 font-medium",children:"Editar"}),e.jsx("button",{onClick:()=>u(s.id),className:"text-red-500 hover:text-red-700",children:e.jsx(de,{size:18})})]})]},s.id))]})]})})]})},Zs=()=>{const[t,l]=f.useState("Impresión"),[i,r]=f.useState([]),[n,o]=f.useState(!1),[c,m]=f.useState(null),u=["Impresión","Laminación","Trilaminado","Refilado","Confección (Bolsera)"];f.useEffect(()=>{const N=ee().filter(g=>g.status==="En Producción"&&(g.currentStage===t||!g.currentStage&&t==="Impresión"));r(N)},[t]);const s=(x,N)=>{m(N),x.dataTransfer.effectAllowed="move";const g=document.createElement("div");g.textContent="Moviendo...",g.style.background="#fff",g.style.padding="10px",g.style.border="1px solid #ccc",document.body.appendChild(g),x.dataTransfer.setDragImage(g,0,0),setTimeout(()=>document.body.removeChild(g),0)},w=(x,N)=>{if(x.preventDefault(),c===null||c===N)return;const g=[...i],d=g[c];g.splice(c,1),g.splice(N,0,d),r(g),m(N)},b=()=>{m(null),zs(i)},E=()=>{o(!0),setTimeout(()=>{const x=document.getElementById("queue-printable-area");if(!x)return;const N=document.createElement("div");N.style.position="fixed",N.style.top="0",N.style.left="0",N.style.width="100vw",N.style.zIndex="999999",N.style.background="#ffffff";const g=x.cloneNode(!0);g.classList.remove("hidden"),g.style.width="100%",N.appendChild(g),document.body.appendChild(N);const d={margin:10,filename:`Planilla_${t}_${new Date().toISOString().split("T")[0]}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"landscape"}};window.html2pdf().set(d).from(g).save().then(()=>{document.body.removeChild(N),o(!1)})},100)};return e.jsxs("div",{className:"h-full flex flex-col animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 bg-white p-4 rounded-xl shadow-sm border border-slate-200",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center",children:[e.jsx(pe,{className:"mr-2 text-brand-600"}),"Fila de Producción"]}),e.jsx("p",{className:"text-sm text-slate-500",children:"Organiza y prioriza las órdenes en curso"})]}),e.jsxs("button",{onClick:E,disabled:n,className:"bg-slate-800 text-white px-4 py-2 rounded-lg flex items-center hover:bg-slate-700 transition-colors",children:[n?e.jsx(Be,{size:18,className:"mr-2 animate-spin"}):e.jsx(Ae,{size:18,className:"mr-2"}),"Descargar Planilla (PDF)"]})]}),e.jsx("div",{className:"flex space-x-1 mb-6 overflow-x-auto pb-2",children:u.map(x=>e.jsx("button",{onClick:()=>l(x),className:`px-5 py-2.5 rounded-lg font-bold text-sm transition-all whitespace-nowrap
                    ${t===x?"bg-brand-600 text-white shadow-md":"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50"}`,children:x},x))}),e.jsx("div",{className:"flex-1 bg-slate-100 rounded-xl p-6 border border-slate-200 overflow-y-auto min-h-[500px]",children:i.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-slate-400",children:[e.jsx(ze,{size:48,className:"mb-4 opacity-50"}),e.jsxs("p",{className:"font-medium",children:["No hay órdenes en la etapa de ",t]}),e.jsx("p",{className:"text-sm",children:'Ve al Dashboard y marca órdenes como "En Producción" en esta etapa.'})]}):e.jsx("div",{className:"space-y-3 max-w-4xl mx-auto",children:i.map((x,N)=>e.jsxs("div",{draggable:!0,onDragStart:g=>s(g,N),onDragOver:g=>w(g,N),onDragEnd:b,className:`bg-white rounded-lg p-4 shadow-sm border border-slate-200 flex items-center group hover:shadow-md transition-all
                            ${c===N?"opacity-50 scale-95":"opacity-100"}`,children:[e.jsxs("div",{className:"mr-4 cursor-grab active:cursor-grabbing text-slate-400 hover:text-brand-500",children:[e.jsx(is,{size:24}),e.jsx("span",{className:"text-xs font-bold text-center block mt-1 w-6",children:N+1})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-4 items-center",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("span",{className:"bg-slate-100 text-slate-600 text-[10px] font-bold px-1.5 py-0.5 rounded mr-2",children:x.orderCode}),e.jsx("span",{className:"text-brand-700 font-bold text-lg",children:x.productName})]}),e.jsx("div",{className:"text-sm text-slate-500 flex items-center",children:e.jsx("span",{className:"font-bold text-slate-700 mr-2",children:x.clientName})})]}),e.jsxs("div",{className:"flex flex-col justify-center text-sm border-l border-slate-100 pl-4",children:[e.jsx("span",{className:"text-slate-400 text-xs uppercase font-bold",children:"Pedido"}),e.jsxs("span",{className:"font-bold text-slate-800 text-lg",children:[x.quantityRequested.toLocaleString()," ",x.unit==="Unidades"?"Ud":"Kg"]}),e.jsxs("span",{className:"text-xs text-slate-500",children:["Total: ",x.calculationSnapshot.totalWeightKg.toLocaleString()," Kg"]})]}),e.jsxs("div",{className:"flex flex-col justify-center text-sm border-l border-slate-100 pl-4",children:[e.jsx("span",{className:"text-slate-400 text-xs uppercase font-bold",children:"Técnico"}),e.jsxs("span",{className:"text-slate-700 font-mono",children:["Ancho: ",e.jsx("strong",{children:x.technicalDetails.webWidth})," mm"]}),e.jsxs("span",{className:"text-slate-700 font-mono",children:["Cilindro: ",e.jsx("strong",{children:x.technicalDetails.cylinder})," mm"]})]})]}),e.jsxs("div",{className:"ml-4 pl-4 border-l border-slate-200 text-right",children:[e.jsxs("div",{className:"bg-emerald-50 text-emerald-700 border border-emerald-200 px-3 py-1.5 rounded-lg flex items-center text-xs font-bold whitespace-nowrap",children:[e.jsx(xe,{size:14,className:"mr-1.5"}),"En ",x.currentStage||"Proceso"]}),e.jsxs("div",{className:"mt-1 text-[10px] text-slate-400 flex items-center justify-end",children:[e.jsx(cs,{size:10,className:"mr-1"})," ",x.date]})]})]},x.id))})}),e.jsxs("div",{id:"queue-printable-area",className:"hidden bg-white p-8",children:[e.jsxs("div",{className:"border-b-2 border-black pb-4 mb-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold uppercase",children:"PCP Multipack"}),e.jsxs("p",{className:"text-lg text-gray-600",children:["Planilla de Programación: ",e.jsx("span",{className:"font-bold text-black uppercase",children:t})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-bold",children:"Fecha Impresión:"}),e.jsx("p",{className:"font-mono",children:new Date().toLocaleString()})]})]}),e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 border-y-2 border-black text-sm uppercase",children:[e.jsx("th",{className:"p-3 w-12 text-center",children:"#"}),e.jsx("th",{className:"p-3",children:"OP"}),e.jsx("th",{className:"p-3",children:"Cliente / Producto"}),e.jsx("th",{className:"p-3 text-right",children:"Cantidad"}),e.jsx("th",{className:"p-3 text-center",children:"Ancho"}),e.jsx("th",{className:"p-3 text-center",children:"Desarrollo"}),e.jsx("th",{className:"p-3 text-center",children:"Estado"}),e.jsx("th",{className:"p-3 w-32",children:"Observaciones"})]})}),e.jsx("tbody",{children:i.map((x,N)=>e.jsxs("tr",{className:"border-b border-gray-300 text-sm",children:[e.jsx("td",{className:"p-3 text-center font-bold text-lg",children:N+1}),e.jsx("td",{className:"p-3 font-mono font-bold",children:x.orderCode}),e.jsxs("td",{className:"p-3",children:[e.jsx("div",{className:"font-bold text-black text-base",children:x.productName}),e.jsx("div",{className:"text-gray-600 text-xs",children:x.clientName})]}),e.jsxs("td",{className:"p-3 text-right font-bold",children:[x.quantityRequested.toLocaleString()," ",x.unit==="Unidades"?"Ud":"Kg"]}),e.jsxs("td",{className:"p-3 text-center",children:[x.technicalDetails.webWidth," mm"]}),e.jsxs("td",{className:"p-3 text-center",children:[x.technicalDetails.cylinder," mm"]}),e.jsx("td",{className:"p-3 text-center",children:e.jsx("span",{className:"bg-gray-100 border border-gray-300 px-2 py-1 rounded text-xs font-bold uppercase",children:x.currentStage})}),e.jsx("td",{className:"p-3 border-l border-gray-200"})]},x.id))})]}),e.jsxs("div",{className:"mt-8 pt-4 border-t-2 border-black flex justify-between text-xs uppercase font-bold text-gray-500",children:[e.jsx("div",{children:"Supervisor de Turno"}),e.jsx("div",{children:"Firma Recibido"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("p",{className:"text-[10px] text-gray-400",children:"Software enigma.com.uy"})})]})]})},Qs=()=>{const[t,l]=f.useState(qe()),[i,r]=f.useState(!1),n=f.useRef(null),o=m=>{m.preventDefault(),_s(t),r(!0),setTimeout(()=>r(!1),2e3)},c=async m=>{m.target.files&&m.target.files[0]&&(await qs(m.target.files[0])&&(alert("Base de datos restaurada correctamente. La página se recargará."),window.location.reload()),n.current&&(n.current.value=""))};return e.jsxs("div",{className:"max-w-2xl mx-auto animate-fade-in space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-8",children:[e.jsxs("div",{className:"flex items-center mb-6 pb-4 border-b border-slate-100",children:[e.jsx("div",{className:"bg-slate-100 p-3 rounded-full mr-4",children:e.jsx(ne,{className:"text-slate-600",size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Parámetros de Producción"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Variables globales para el cálculo de merma y metraje"})]})]}),e.jsxs("form",{onSubmit:o,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-slate-700 mb-2",children:"Metros Fijos de Arranque"}),e.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Cantidad de metros perdidos por setup/montaje de máquina."}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",className:"w-full border border-slate-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-brand-500 outline-none",value:t.fixedStartupMeters,onChange:m=>l({...t,fixedStartupMeters:Number(m.target.value)})}),e.jsx("span",{className:"ml-3 text-slate-600 font-medium",children:"metros"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block font-medium text-slate-700 mb-2",children:"% Merma Variable (Proceso)"}),e.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Porcentaje de seguridad sobre el metraje neto (ej. 0.05 = 5%)."}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"number",step:"0.01",className:"w-full border border-slate-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-brand-500 outline-none",value:t.variableScrapPercent,onChange:m=>l({...t,variableScrapPercent:Number(m.target.value)})}),e.jsx("span",{className:"ml-3 text-slate-600 font-medium",children:"factor (0.1 = 10%)"})]})]}),e.jsxs("div",{className:"pt-4 flex items-center justify-between",children:[i?e.jsx("span",{className:"text-green-600 font-medium text-sm animate-pulse",children:"¡Guardado correctamente!"}):e.jsx("span",{}),e.jsxs("button",{type:"submit",className:"bg-brand-600 text-white px-6 py-2 rounded-lg hover:bg-brand-700 transition-colors flex items-center",children:[e.jsx(oe,{className:"mr-2",size:18})," Guardar Cambios"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-8",children:[e.jsxs("div",{className:"flex items-center mb-6 pb-4 border-b border-slate-100",children:[e.jsx("div",{className:"bg-emerald-100 p-3 rounded-full mr-4",children:e.jsx(ds,{className:"text-emerald-600",size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Base de Datos (Sincronización)"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Guarda y carga tu información para usar en otros equipos"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-100",children:[e.jsxs("div",{className:"text-slate-600 text-sm max-w-xs",children:[e.jsx("strong",{children:"Reporte Excel (.xlsx)"}),e.jsx("br",{}),"Tablas de Clientes, Materiales y Fichas legibles para humanos."]}),e.jsxs("button",{onClick:Fs,className:"bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors flex items-center shadow",children:[e.jsx(ye,{className:"mr-2",size:18})," Excel"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100",children:[e.jsxs("div",{className:"text-blue-800 text-sm mb-3 font-bold flex items-center",children:[e.jsx(os,{className:"mr-2",size:16})," 1. Guardar (Backup)"]}),e.jsx("p",{className:"text-xs text-blue-600 mb-3",children:"Descarga el archivo JSON. Guárdalo en tu Google Drive para llevarlo a otra PC."}),e.jsxs("button",{onClick:Rs,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center shadow text-sm",children:[e.jsx(ye,{className:"mr-2",size:16})," Descargar DB"]})]}),e.jsxs("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-100",children:[e.jsxs("div",{className:"text-amber-800 text-sm mb-3 font-bold flex items-center",children:[e.jsx(Se,{className:"mr-2",size:16})," 2. Restaurar (Importar)"]}),e.jsx("p",{className:"text-xs text-amber-600 mb-3",children:"Carga el archivo JSON desde tu PC o Drive para recuperar tus datos."}),e.jsx("input",{type:"file",accept:".json",ref:n,className:"hidden",onChange:c}),e.jsxs("button",{onClick:()=>{var m;return(m=n.current)==null?void 0:m.click()},className:"w-full bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition-colors flex items-center justify-center shadow text-sm",children:[e.jsx(Se,{className:"mr-2",size:16})," Cargar DB"]})]})]})]})]})]})},ge=({order:t,onSelect:l,onStatusChange:i,onDelete:r})=>{const n={Pendiente:"border-l-4 border-l-amber-400","En Producción":"border-l-4 border-l-blue-500",Terminado:"border-l-4 border-l-emerald-500 opacity-75"};return e.jsxs("div",{onClick:()=>l(t),className:`bg-white rounded-lg shadow-sm p-4 mb-4 border border-slate-200 ${n[t.status]||"border-l-4 border-l-slate-400"} hover:shadow-md hover:scale-[1.01] transition-all cursor-pointer relative`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex-1 pr-2",children:[e.jsxs("span",{className:"text-xs font-bold text-slate-400 block",children:[t.orderCode," | ",t.date]}),e.jsx("h4",{className:"font-bold text-slate-800 text-base leading-tight mb-1",children:t.clientName}),e.jsx("p",{className:"text-sm text-slate-600 leading-snug",children:t.productName})]}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsxs("span",{className:"block font-bold text-slate-800",children:[t.quantityRequested.toLocaleString()," ",t.unit==="Unidades"?"Ud":t.unit==="Metros"?"m":"Kg"]}),e.jsx("span",{className:"text-xs bg-slate-100 px-2 py-0.5 rounded text-slate-500",children:t.technicalDetails.format})]})]}),t.status==="En Producción"&&t.currentStage&&e.jsxs("div",{className:"my-2 text-xs font-bold text-blue-700 bg-blue-50 px-2 py-1 rounded border border-blue-100 flex items-center",children:[e.jsx(pe,{size:12,className:"mr-1.5"}),"Etapa: ",t.currentStage]}),e.jsxs("div",{className:"bg-slate-50 rounded p-2 my-3 text-xs space-y-1 border border-slate-100",children:[e.jsxs("div",{className:"flex items-center text-slate-600",children:[e.jsx(Le,{size:12,className:"mr-1.5"}),e.jsxs("span",{children:["Ancho: ",e.jsxs("strong",{children:[t.technicalDetails.webWidth,"mm"]})," | Cutoff: ",e.jsxs("strong",{children:[t.technicalDetails.cutoff,"mm"]})]})]}),e.jsxs("div",{className:"flex items-center text-slate-600",children:[e.jsx(ie,{size:12,className:"mr-1.5"}),e.jsx("span",{children:t.technicalDetails.layers.join(" + ")})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-3 pt-2 border-t border-slate-100",children:[e.jsxs("div",{className:"text-xs text-brand-600 font-medium",children:["Req: ",t.calculationSnapshot.grossLinearMeters.toLocaleString(),"m"]}),e.jsxs("div",{className:"flex space-x-1",children:[t.status==="Pendiente"&&e.jsx("button",{onClick:o=>i(t.id,"En Producción",o),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded tooltip",title:"Iniciar",children:e.jsx(ne,{size:16})}),t.status==="En Producción"&&e.jsx("button",{onClick:o=>i(t.id,"Terminado",o),className:"p-1.5 text-emerald-600 hover:bg-emerald-50 rounded tooltip",title:"Finalizar",children:e.jsx(xe,{size:16})}),e.jsx("button",{onClick:o=>r(t.id,o),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded",children:e.jsx(de,{size:16})})]})]})]})},Ys=()=>{const[t,l]=f.useState([]),[i,r]=f.useState({active:0,materials:0,clients:0}),[n,o]=f.useState(null);f.useEffect(()=>{const s=ee();l(s),r({active:s.filter(w=>w.status!=="Terminado").length,materials:ce().length,clients:se().length})},[]);const c=(s,w,b)=>{b.stopPropagation(),Ms(s,w);const E=ee();l(E),n&&n.id===s&&o(E.find(x=>x.id===s)||null)},m=(s,w)=>{w.stopPropagation(),confirm("¿Eliminar historial de orden?")&&(Ks(s),l(ee()),(n==null?void 0:n.id)===s&&o(null))},u=({order:s,onClose:w})=>{const[b,E]=f.useState(!1),[x,N]=f.useState(s.currentStage),g=se(),d=re(),O=s.clientId?g.find(y=>y.id===s.clientId):null,_=d.find(y=>y.id===s.productId);if(!s)return null;const U=y=>{if(b)return;N(y),Bs(s.id,y);const p=ee();l(p)},j=()=>{E(!0),setTimeout(()=>{const y=document.getElementById("printable-order-content");if(!y){E(!1);return}const p=document.createElement("div");p.style.position="fixed",p.style.top="0",p.style.left="0",p.style.width="100vw",p.style.height="auto",p.style.minHeight="100vh",p.style.zIndex="999999",p.style.background="#ffffff",p.style.display="flex",p.style.justifyContent="center",p.style.padding="20px";const k=y.cloneNode(!0);k.style.maxHeight="none",k.style.boxShadow="none",k.style.width="100%",k.style.maxWidth="1000px",k.style.overflow="visible",p.appendChild(k),document.body.appendChild(p),window.scrollTo(0,0);const z={margin:[10,10,10,10],filename:`Orden_${s.orderCode}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,logging:!1,scrollY:0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"},pagebreak:{mode:["css","legacy"]}};window.html2pdf&&window.html2pdf().set(z).from(k).save().then(()=>{document.body.removeChild(p),E(!1)}).catch(V=>{console.error(V),document.body.removeChild(p),E(!1),alert("Error generando PDF")})},200)};return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",children:e.jsxs("div",{id:"printable-order-content",className:`bg-white rounded-xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-y-auto relative ${b?"border-none p-8":""}`,children:[e.jsxs("div",{className:`justify-between items-center border-b-2 border-black pb-4 mb-6 ${b?"flex":"hidden"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(pe,{size:48,className:"mr-4 text-black"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold uppercase tracking-wide text-black",children:"PCP"}),e.jsx("p",{className:"text-base font-medium text-gray-600",children:"Orden de Producción / Hoja de Ruta"})]})]}),e.jsxs("div",{className:"text-right text-black",children:[e.jsx("div",{className:"text-4xl font-bold font-mono mb-1",children:s.orderCode}),e.jsxs("div",{className:"text-sm font-medium",children:["Fecha: ",s.date]}),e.jsxs("div",{className:"flex items-center justify-end mt-2",children:[e.jsx(xs,{size:24,className:"mr-1"}),e.jsx("span",{className:"text-xs tracking-[0.2em]",children:"||| |||| || |||||"})]})]})]}),e.jsxs("div",{className:`bg-slate-900 text-white p-6 flex justify-between items-start sticky top-0 z-10 ${b?"hidden":"flex"}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h2",{className:"text-2xl font-bold",children:s.orderCode}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider
                  ${s.status==="Pendiente"?"bg-amber-400 text-amber-900":s.status==="En Producción"?"bg-blue-500 text-white":"bg-emerald-500 text-white"}`,children:s.status})]}),e.jsx("p",{className:"text-slate-400 mt-1 font-medium",children:s.productName})]}),e.jsx("button",{onClick:w,className:"text-slate-400 hover:text-white p-1 bg-slate-800 rounded hover:bg-slate-700 transition-colors",children:e.jsx(Me,{size:24})})]}),e.jsxs("div",{className:`p-6 space-y-6 ${b?"text-black":""}`,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 avoid-break",children:[e.jsxs("div",{className:`bg-slate-50 p-5 rounded-lg border border-slate-200 ${b?"bg-white border-2 border-black":""}`,children:[e.jsxs("div",{className:"flex items-center mb-3 border-b border-slate-200 pb-2",children:[e.jsx(ke,{size:18,className:"mr-2 text-slate-500"}),e.jsx("h3",{className:"text-sm font-bold uppercase text-slate-500",children:"Datos del Cliente"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold text-slate-900 leading-tight",children:s.clientName}),e.jsxs("p",{className:"text-xs text-slate-500",children:["ID: ",s.clientId]})]}),O?e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mt-2",children:[e.jsxs("div",{className:"flex items-center text-slate-700",children:[e.jsx(ke,{size:14,className:"mr-1.5 text-slate-400"})," ",O.contact]}),e.jsxs("div",{className:"flex items-center text-slate-700",children:[e.jsx(hs,{size:14,className:"mr-1.5 text-slate-400"})," ",O.phone||"N/A"]}),e.jsxs("div",{className:"col-span-2 flex items-center text-slate-700",children:[e.jsx(us,{size:14,className:"mr-1.5 text-slate-400"})," ",O.email||"N/A"]})]}):e.jsx("p",{className:"text-sm text-slate-400 italic",children:"Información detallada no disponible"})]})]}),e.jsxs("div",{className:`bg-slate-50 p-5 rounded-lg border border-slate-200 ${b?"bg-white border-2 border-black":""}`,children:[e.jsxs("div",{className:"flex items-center mb-3 border-b border-slate-200 pb-2",children:[e.jsx(ve,{size:18,className:"mr-2 text-slate-500"}),e.jsx("h3",{className:"text-sm font-bold uppercase text-slate-500",children:"Ficha Técnica"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold text-slate-900 leading-tight",children:s.productName}),e.jsxs("p",{className:"text-sm font-mono font-bold text-brand-700 mt-1",children:["SKU: ",(_==null?void 0:_.sku)||"N/A"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mt-2",children:[e.jsxs("div",{className:"bg-white px-2 py-1 rounded border border-slate-100",children:[e.jsx("span",{className:"text-xs text-slate-400 block",children:"Formato"}),e.jsx("span",{className:"font-bold text-slate-800",children:s.technicalDetails.format})]}),e.jsxs("div",{className:"bg-white px-2 py-1 rounded border border-slate-100",children:[e.jsx("span",{className:"text-xs text-slate-400 block",children:"Pedido"}),e.jsxs("span",{className:"font-bold text-slate-800",children:[s.quantityRequested," ",s.unit]})]}),e.jsxs("div",{className:"col-span-2 bg-emerald-50 px-2 py-1 rounded border border-emerald-100 text-center",children:[e.jsx("span",{className:"text-xs text-emerald-600 block font-bold uppercase",children:"Peso Total Estimado"}),e.jsxs("span",{className:"font-bold text-lg text-emerald-800",children:[s.calculationSnapshot.totalWeightKg.toLocaleString()," Kg"]})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 avoid-break",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 uppercase border-b-2 border-slate-200 pb-2 mb-4 flex items-center",children:[e.jsx(ne,{size:16,className:"mr-2"})," Especificaciones de Máquina"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between border-b border-slate-100 pb-1",children:[e.jsx("span",{className:"text-slate-500 font-medium",children:"Pistas / Montaje"}),e.jsx("span",{className:"font-bold text-slate-800",children:s.technicalDetails.tracks})]}),e.jsxs("div",{className:"flex justify-between border-b border-slate-100 pb-1",children:[e.jsx("span",{className:"text-slate-500 font-medium",children:"Desarrollo (Cilindro)"}),e.jsxs("span",{className:"font-bold text-slate-800",children:[s.technicalDetails.cylinder," mm"]})]}),e.jsxs("div",{className:"flex justify-between border-b border-slate-100 pb-1",children:[e.jsx("span",{className:"text-slate-500 font-medium",children:"Paso (Cutoff)"}),e.jsxs("span",{className:"font-bold text-slate-800",children:[s.technicalDetails.cutoff," mm"]})]}),e.jsxs("div",{className:"flex justify-between border-b border-slate-100 pb-1",children:[e.jsx("span",{className:"text-slate-500 font-medium",children:"Ancho Bobina Impresión"}),e.jsxs("span",{className:"font-bold text-brand-600 text-black text-lg",children:[s.technicalDetails.webWidth," mm"]})]}),s.technicalDetails.windingDirection&&e.jsxs("div",{className:"flex justify-between border-b border-slate-100 pb-1",children:[e.jsx("span",{className:"text-slate-500 font-medium",children:"Sentido Bobinado"}),e.jsx("span",{className:"font-bold text-slate-800",children:s.technicalDetails.windingDirection})]})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 uppercase border-b-2 border-slate-200 pb-2 mb-4 flex items-center",children:[e.jsx(Pe,{size:16,className:"mr-2"})," Ruta de Proceso",e.jsx("span",{className:`ml-2 text-xs font-normal lowercase text-slate-400 ${b?"hidden":"inline"}`,children:"(Click para marcar etapa)"})]}),e.jsx("div",{className:"space-y-2",children:s.requiredStages.map((y,p)=>e.jsxs("div",{onClick:()=>U(y),className:`flex items-center justify-between p-3 rounded cursor-pointer transition-all ${x===y?"bg-brand-600 text-white shadow-md transform scale-[1.02]":"bg-slate-50 hover:bg-slate-100 text-slate-700"} ${b?"bg-white border border-black py-2 mb-2 text-black":""}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`h-6 w-6 rounded-full flex items-center justify-center text-xs font-bold mr-3 
                                   ${b?"bg-black text-white border border-black":x===y?"bg-white text-brand-600":"bg-brand-100 text-brand-600"}`,children:p+1}),e.jsx("span",{className:`font-bold uppercase text-xs ${x===y?"text-white":"text-slate-700"} ${b?"text-black":""}`,children:y})]}),b&&e.jsx("div",{className:"h-4 w-4 border border-black"}),x===y&&!b&&e.jsx(xe,{size:16,className:"text-white"})]},p))})]})]}),e.jsxs("div",{className:"avoid-break",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 uppercase border-b-2 border-slate-200 pb-2 mb-4 flex items-center",children:[e.jsx(ie,{size:16,className:"mr-2"})," Lista de Materiales (Picking List)"]}),s.materialRequirements&&s.materialRequirements.length>0?e.jsx("div",{className:`border rounded-lg overflow-hidden ${b?"border-2 border-black":"border-slate-200"}`,children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:`bg-slate-100 text-slate-600 uppercase text-xs ${b?"bg-gray-100 text-black border-b-2 border-black":""}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"Uso"}),e.jsx("th",{className:"px-4 py-2",children:"Código"}),e.jsx("th",{className:"px-4 py-2",children:"Descripción Material"}),e.jsx("th",{className:"px-4 py-2 text-center",children:"Ancho"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"Cantidad"}),b&&e.jsx("th",{className:"px-4 py-2 text-center w-16",children:"OK"})]})}),e.jsxs("tbody",{className:`divide-y ${b?"divide-black":"divide-slate-100"}`,children:[s.materialRequirements.map((y,p)=>{const k=y.isSubstitute;return e.jsxs("tr",{className:k?b?"bg-white":"bg-amber-50":"",children:[e.jsxs("td",{className:"px-4 py-2 font-bold text-slate-700",children:[y.layer,k&&e.jsx("span",{className:`ml-2 text-[10px] bg-amber-200 text-amber-800 px-1.5 py-0.5 rounded uppercase ${b?"border border-black bg-white text-black":""}`,children:"Sustituto"})]}),e.jsx("td",{className:"px-4 py-2 font-mono text-brand-600 font-bold text-black",children:y.internalCode}),e.jsx("td",{className:"px-4 py-2",children:y.materialName}),e.jsxs("td",{className:"px-4 py-2 text-center font-bold",children:[y.width," mm"]}),e.jsxs("td",{className:"px-4 py-2 text-right font-bold",children:[y.requiredKg.toLocaleString()," Kg"]}),b&&e.jsx("td",{className:"border-l border-black"})]},p)}),e.jsxs("tr",{className:`bg-slate-50 ${b?"bg-white border-t-2 border-black":""}`,children:[e.jsx("td",{colSpan:4,className:"px-4 py-2 text-right font-bold text-slate-500 uppercase text-xs text-black",children:"Total Sustratos"}),e.jsxs("td",{className:"px-4 py-2 text-right font-bold",children:[(s.calculationSnapshot.layer1Kg+s.calculationSnapshot.layer2Kg+s.calculationSnapshot.layer3Kg).toLocaleString()," Kg"]}),b&&e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"px-4 py-2 text-right font-bold text-slate-500 uppercase text-xs text-black",children:"Insumos (Tinta/Adh)"}),e.jsxs("td",{className:"px-4 py-2 text-right font-medium",children:[(s.calculationSnapshot.inkKg+s.calculationSnapshot.adhesiveKg).toLocaleString()," Kg"]}),b&&e.jsx("td",{})]})]})]})}):e.jsx("div",{className:"bg-amber-50 p-4 text-amber-800 rounded-lg text-sm",children:e.jsx("p",{children:"Datos detallados no disponibles para esta orden histórica."})})]}),e.jsxs("div",{className:`mt-6 pt-4 border-t-2 border-black ${b?"block":"hidden"}`,children:[e.jsx("h3",{className:"text-lg font-bold uppercase mb-6 text-center border-b border-black pb-2",children:"Control de Calidad en Planta"}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"border-2 border-black p-4 avoid-break mb-4",children:[e.jsx("h4",{className:"font-bold uppercase bg-gray-100 border-b border-black p-2 text-sm mb-3",children:"1. Impresión (Prensa)"}),e.jsxs("div",{className:"space-y-4 text-xs",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("span",{className:"w-32 font-bold",children:"Operador / Turno:"})," ",e.jsx("div",{className:"border-b border-black flex-1 h-4"})]}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("span",{className:"w-32 font-bold",children:"Viscosidad Inicial:"})," ",e.jsx("div",{className:"border-b border-black flex-1 h-4"})," ",e.jsx("span",{className:"w-32 font-bold ml-4",children:"Velocidad (m/min):"})," ",e.jsx("div",{className:"border-b border-black flex-1 h-4"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 border border-black mr-2"})," Registro Color"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 border border-black mr-2"})," Tono vs Muestra"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 border border-black mr-2"})," Adherencia (Test)"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 border border-black mr-2"})," Limpieza"]})]}),e.jsx("div",{className:"border border-dashed border-gray-400 p-2 mt-2 h-16 text-gray-500",children:"Observaciones..."})]})]}),s.technicalDetails.layers.length>1&&e.jsxs("div",{className:"border-2 border-black p-4 avoid-break mb-4",children:[e.jsx("h4",{className:"font-bold uppercase bg-gray-100 border-b border-black p-2 text-sm mb-3",children:"2. Laminación / Solvente"}),e.jsxs("div",{className:"space-y-4 text-xs",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("span",{className:"w-32 font-bold",children:"Operador:"})," ",e.jsx("div",{className:"border-b border-black flex-1 h-4"})]}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("span",{className:"w-32 font-bold",children:"Gramaje (g/m²):"})," ",e.jsx("div",{className:"border-b border-black flex-1 h-4"})," ",e.jsx("span",{className:"w-32 font-bold ml-4",children:"Temperatura de Calandras:"})," ",e.jsx("div",{className:"border-b border-black flex-1 h-4"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 border border-black mr-2"})," Apariencia"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 border border-black mr-2"})," Ancho Adhesivo"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 border border-black mr-2"})," Tensiones"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 border border-black mr-2"})," Sin Burbujas"]})]})]})]}),e.jsxs("div",{className:"border-2 border-black p-4 avoid-break mb-4",children:[e.jsxs("h4",{className:"font-bold uppercase bg-gray-100 border-b border-black p-2 text-sm mb-3",children:["3. ",s.technicalDetails.format==="BOLSA"?"Bolsera (Confección)":"Refilado (Corte)"]}),e.jsxs("div",{className:"space-y-4 text-xs",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("span",{className:"w-32 font-bold",children:"Operador:"})," ",e.jsx("div",{className:"border-b border-black flex-1 h-4"})]}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("span",{className:"w-32 font-bold",children:"Cajas/Bobinas:"})," ",e.jsx("div",{className:"border-b border-black flex-1 h-4"})," ",e.jsx("span",{className:"w-32 font-bold ml-4",children:"Cant. Rechazada:"})," ",e.jsx("div",{className:"border-b border-black flex-1 h-4"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 border border-black mr-2"})," Medidas OK"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 border border-black mr-2"})," ",s.technicalDetails.format==="BOLSA"?"Resistencia de sellos":"Corte Limpio"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 border border-black mr-2"})," Aspecto visual"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-5 h-5 border border-black mr-2"})," Embalaje"]})]})]})]}),e.jsxs("div",{className:"border-2 border-black p-4 bg-gray-50 avoid-break flex justify-between items-center",children:[e.jsxs("div",{className:"w-2/3",children:[e.jsx("h4",{className:"font-bold uppercase mb-2 text-sm",children:"Liberación Final de Calidad"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Certifico que este lote cumple con las especificaciones de la ficha técnica."})]}),e.jsxs("div",{className:"w-1/3 border-l-2 border-black pl-4 text-center",children:[e.jsx("div",{className:"h-16 border-b border-black mb-1"}),e.jsx("div",{className:"text-[10px] uppercase font-bold",children:"Firma Supervisor / Calidad"})]})]})]})]})]}),e.jsxs("div",{className:`bg-slate-50 p-4 border-t border-slate-200 flex justify-end space-x-3 ${b?"hidden":"flex"}`,children:[e.jsx("button",{onClick:w,className:"px-4 py-2 text-slate-600 hover:bg-slate-200 rounded-lg font-medium",children:"Cerrar"}),e.jsx("button",{type:"button",onClick:j,disabled:b,className:"px-4 py-2 bg-brand-600 text-white hover:bg-brand-700 rounded-lg font-medium flex items-center shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:b?e.jsxs(e.Fragment,{children:[e.jsx(Be,{size:18,className:"mr-2 animate-spin"})," Generando PDF..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{size:18,className:"mr-2"})," Guardar Hoja de Ruta (PDF)"]})})]})]})})};return e.jsxs("div",{className:"animate-fade-in space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Órdenes Activas"}),e.jsx("p",{className:"text-2xl font-bold text-brand-600",children:i.active})]}),e.jsx("div",{className:"bg-brand-50 p-2 rounded-full",children:e.jsx(Pe,{className:"text-brand-500"})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Materiales"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:i.materials})]}),e.jsx("div",{className:"bg-slate-50 p-2 rounded-full",children:e.jsx(ie,{className:"text-slate-500"})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Clientes"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:i.clients})]}),e.jsx("div",{className:"bg-slate-50 p-2 rounded-full",children:e.jsx(ms,{className:"text-slate-500"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[e.jsxs("div",{className:"bg-slate-100 rounded-xl p-4 h-min min-h-[500px]",children:[e.jsxs("h3",{className:"font-bold text-slate-600 mb-4 flex items-center",children:[e.jsx(ze,{size:18,className:"mr-2"})," Pendientes",e.jsx("span",{className:"ml-2 bg-slate-200 text-slate-600 px-2 py-0.5 rounded-full text-xs",children:t.filter(s=>s.status==="Pendiente").length})]}),t.filter(s=>s.status==="Pendiente").length===0&&e.jsx("p",{className:"text-sm text-slate-400 text-center mt-10",children:"No hay órdenes pendientes"}),t.filter(s=>s.status==="Pendiente").map(s=>e.jsx(ge,{order:s,onSelect:o,onStatusChange:c,onDelete:m},s.id))]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 h-min min-h-[500px]",children:[e.jsxs("h3",{className:"font-bold text-blue-800 mb-4 flex items-center",children:[e.jsx(ne,{size:18,className:"mr-2"})," En Producción",e.jsx("span",{className:"ml-2 bg-blue-200 text-blue-800 px-2 py-0.5 rounded-full text-xs",children:t.filter(s=>s.status==="En Producción").length})]}),t.filter(s=>s.status==="En Producción").length===0&&e.jsx("p",{className:"text-sm text-blue-300 text-center mt-10",children:"Máquinas detenidas"}),t.filter(s=>s.status==="En Producción").map(s=>e.jsx(ge,{order:s,onSelect:o,onStatusChange:c,onDelete:m},s.id))]}),e.jsxs("div",{className:"bg-emerald-50 rounded-xl p-4 h-min min-h-[500px]",children:[e.jsxs("h3",{className:"font-bold text-emerald-800 mb-4 flex items-center",children:[e.jsx(xe,{size:18,className:"mr-2"})," Historial Reciente"]}),t.filter(s=>s.status==="Terminado").length===0&&e.jsx("p",{className:"text-sm text-emerald-300 text-center mt-10",children:"Sin historial"}),t.filter(s=>s.status==="Terminado").slice(0,5).map(s=>e.jsx(ge,{order:s,onSelect:o,onStatusChange:c,onDelete:m},s.id)),t.filter(s=>s.status==="Terminado").length>5&&e.jsx("div",{className:"text-center mt-4",children:e.jsx("p",{className:"text-xs text-emerald-600 italic",children:"Mostrando 5 más recientes"})})]})]}),n&&e.jsx(u,{order:n,onClose:()=>o(null)})]})},Xs=()=>{const[t,l]=f.useState("dashboard");return e.jsxs("div",{className:"flex min-h-screen bg-slate-50 font-sans",children:[e.jsx(Ws,{activeTab:t,setActiveTab:l}),e.jsx("main",{className:"flex-1 ml-64 p-8 overflow-y-auto h-screen",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("header",{className:"mb-8 flex justify-between items-center",children:e.jsx("h1",{className:"text-3xl font-bold text-slate-800 capitalize",children:t==="settings"?"Configuración":t==="queue"?"Programación":t.replace("-"," ")})}),t==="dashboard"&&e.jsx(Ys,{}),t==="queue"&&e.jsx(Zs,{}),t==="calculator"&&e.jsx(Us,{}),t==="products"&&e.jsx(Gs,{}),t==="materials"&&e.jsx(Hs,{}),t==="suppliers"&&e.jsx(Js,{}),t==="clients"&&e.jsx(Vs,{}),t==="settings"&&e.jsx(Qs,{})]})})]})},We=document.getElementById("root");if(!We)throw new Error("Could not find root element to mount to");const et=we.createRoot(We);et.render(e.jsx(Ge.StrictMode,{children:e.jsx(Xs,{})}));
